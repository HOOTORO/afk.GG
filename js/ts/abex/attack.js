import { expeditor, team } from "../abex.js";
import { elBuilder } from "../components/builder.js";
import { exportToCsv } from "../components/csvexport.js";
import { newEl, newIn, newBtn } from "../components/helper.js";
import { elTag, Input } from "../model/constants.js";
import { Virtues } from "../types/virtue.js";
const outputTableId = "dps-table";
export function AttackForm() {
    const c = "attack-inputs", dataColumns = [
        "Team",
        "Pet",
        ...expeditor.DuraTree.map((x) => x.img().outerHTML),
        "Damage",
        "Comment",
    ];
    const addAttack = newBtn("Add Dmg", "add-attack md-button"), csvExport = newBtn("Export", "export-csv md-button"), treeDiv = newEl("div", { class: `team-set-inputs` });
    treeDiv.appendChild(expeditor.stamina.html());
    expeditor.DuraTree.forEach((x) => {
        treeDiv.appendChild(x.html());
    });
    const btnContainer = new elBuilder(elTag.Label)
        .add(addAttack)
        .add(csvExport)
        .html(), dpsLabel = new elBuilder(elTag.Label, { for: "dps" })
        .add(newIn(Input.Number, { class: `${c}__input`, id: "dps", step: "1000" }))
        .html(), comLabel = new elBuilder(elTag.Label, { for: "comm" })
        .add(newIn(Input.Text, { class: `${c}__input`, id: "comm" }))
        .html();
    dpsLabel.innerHTML += "Damage, B.";
    comLabel.innerHTML += "Comment";
    const atkF = new elBuilder(elTag.Form, {
        class: "team-set-inputs",
        id: "team-attacks-form",
    })
        .add(dpsLabel)
        .add(comLabel)
        .add(btnContainer)
        .html();
    const atkC = new elBuilder(elTag.Div, { class: c })
        .add(atkF)
        .add(newEl("h2", {}, "Set Food & Dura Tree"))
        .add(treeDiv)
        .html();
    document.getElementById("attack-app").appendChild(atkC);
    team.mount("team-set");
    const header = document
        .getElementById("team-attacks-form")
        .appendChild(newEl(elTag.Table, {
        id: outputTableId,
        class: "dps",
        style: "width:100%",
    }))
        .appendChild(newEl(elTag.Thead))
        .appendChild(newEl(elTag.tr));
    const body = document
        .getElementById("dps-table")
        .appendChild(newEl(elTag.Tbody));
    dataColumns.forEach((x) => header.appendChild(newEl(elTag.th, {}, x)));
    const dpsField = document.getElementById("dps");
    const commentField = document.getElementById("comm");
    csvExport.addEventListener("click", (e) => {
        const o = team.damage.map((x) => [
            team.roster.map((y) => y.name).join("|"),
            team.beast.name,
            ...expeditor.DuraTree.map((v) => `${v.value}`),
            x[0].toString(),
            x[1].toString(),
        ]);
        exportToCsv("data.csv", o, dataColumns);
    });
    addAttack.addEventListener("click", (e) => {
        const tree = newEl(elTag.Div);
        expeditor.DuraTree.forEach((x) => {
            tree.appendChild(x.img());
            tree.innerHTML += `:${x.value}`;
        });
        team.appendResultRow(body, dpsField.valueAsNumber, expeditor.DuraTree[Virtues.MIGHT].value, expeditor.DuraTree[Virtues.FORTITUDE].value, expeditor.DuraTree[Virtues.CELERITY].value, expeditor.DuraTree[Virtues.SORCERY].value, expeditor.DuraTree[Virtues.SUSTENANCE].value, commentField.value);
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXR0YWNrLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL2FiZXgvYXR0YWNrLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLE1BQU0sWUFBWSxDQUFDO0FBQzdDLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUNyRCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFDekQsT0FBTyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFDL0QsT0FBTyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUNyRCxPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFFN0MsTUFBTSxhQUFhLEdBQUcsV0FBVyxDQUFDO0FBRWxDLE1BQU0sVUFBVSxVQUFVO0lBQ3hCLE1BQU0sQ0FBQyxHQUFHLGVBQWUsRUFDdkIsV0FBVyxHQUFHO1FBQ1osTUFBTTtRQUNOLEtBQUs7UUFDTCxHQUFHLFNBQVMsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsU0FBUyxDQUFDO1FBQ25ELFFBQVE7UUFDUixTQUFTO0tBQ1YsQ0FBQztJQUVKLE1BQU0sU0FBUyxHQUFHLE1BQU0sQ0FBQyxTQUFTLEVBQUUsc0JBQXNCLENBQUMsRUFDekQsU0FBUyxHQUFHLE1BQU0sQ0FBQyxRQUFRLEVBQUUsc0JBQXNCLENBQUMsRUFDcEQsT0FBTyxHQUFHLEtBQUssQ0FBQyxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsaUJBQWlCLEVBQUUsQ0FBQyxDQUFDO0lBRXZELE9BQU8sQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO0lB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MUIsSUFBSSxDQUFDLFNBQVMsSUFBSSxJQUFJLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUNsQyxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxlQUFlLENBQ2xCLElBQUksRUFDSixRQUFRLENBQUMsYUFBYSxFQUN0QixTQUFTLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLEVBQ3ZDLFNBQVMsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEtBQUssRUFDM0MsU0FBUyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsS0FBSyxFQUMxQyxTQUFTLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxLQUFLLEVBQ3pDLFNBQVMsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDLEtBQUssRUFDNUMsWUFBWSxDQUFDLEtBQUssQ0FDbkIsQ0FBQztJQUNKLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGV4cGVkaXRvciwgdGVhbSB9IGZyb20gXCIuLi9hYmV4LmpzXCI7XG5pbXBvcnQgeyBlbEJ1aWxkZXIgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9idWlsZGVyLmpzXCI7XG5pbXBvcnQgeyBleHBvcnRUb0NzdiB9IGZyb20gXCIuLi9jb21wb25lbnRzL2NzdmV4cG9ydC5qc1wiO1xuaW1wb3J0IHsgbmV3RWwsIG5ld0luLCBuZXdCdG4gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9oZWxwZXIuanNcIjtcbmltcG9ydCB7IGVsVGFnLCBJbnB1dCB9IGZyb20gXCIuLi9tb2RlbC9jb25zdGFudHMuanNcIjtcbmltcG9ydCB7IFZpcnR1ZXMgfSBmcm9tIFwiLi4vdHlwZXMvdmlydHVlLmpzXCI7XG5cbmNvbnN0IG91dHB1dFRhYmxlSWQgPSBcImRwcy10YWJsZVwiO1xuXG5leHBvcnQgZnVuY3Rpb24gQXR0YWNrRm9ybSgpIHtcbiAgY29uc3QgYyA9IFwiYXR0YWNrLWlucHV0c1wiLFxuICAgIGRhdGFDb2x1bW5zID0gW1xuICAgICAgXCJUZWFtXCIsXG4gICAgICBcIlBldFwiLFxuICAgICAgLi4uZXhwZWRpdG9yLkR1cmFUcmVlLm1hcCgoeCkgPT4geC5pbWcoKS5vdXRlckhUTUwpLFxuICAgICAgXCJEYW1hZ2VcIixcbiAgICAgIFwiQ29tbWVudFwiLFxuICAgIF07XG5cbiAgY29uc3QgYWRkQXR0YWNrID0gbmV3QnRuKFwiQWRkIERtZ1wiLCBcImFkZC1hdHRhY2sgbWQtYnV0dG9uXCIpLFxuICAgIGNzdkV4cG9ydCA9IG5ld0J0bihcIkV4cG9ydFwiLCBcImV4cG9ydC1jc3YgbWQtYnV0dG9uXCIpLFxuICAgIHRyZWVEaXYgPSBuZXdFbChcImRpdlwiLCB7IGNsYXNzOiBgdGVhbS1zZXQtaW5wdXRzYCB9KTtcblxuICB0cmVlRGl2LmFwcGVuZENoaWxkKGV4cGVkaXRvci5zdGFtaW5hLmh0bWwoKSk7XG4gIGV4cGVkaXRvci5EdXJhVHJlZS5mb3JFYWNoKCh4KSA9PiB7XG4gICAgdHJlZURpdi5hcHBlbmRDaGlsZCh4Lmh0bWwoKSk7XG4gIH0pO1xuXG4gIGNvbnN0IGJ0bkNvbnRhaW5lciA9IG5ldyBlbEJ1aWxkZXIoZWxUYWcuTGFiZWwpXG4gICAgICAuYWRkKGFkZEF0dGFjaylcbiAgICAgIC5hZGQoY3N2RXhwb3J0KVxuICAgICAgLmh0bWwoKSxcbiAgICBkcHNMYWJlbCA9IG5ldyBlbEJ1aWxkZXIoZWxUYWcuTGFiZWwsIHsgZm9yOiBcImRwc1wiIH0pXG4gICAgICAuYWRkKFxuICAgICAgICBuZXdJbihJbnB1dC5OdW1iZXIsIHsgY2xhc3M6IGAke2N9X19pbnB1dGAsIGlkOiBcImRwc1wiLCBzdGVwOiBcIjEwMDBcIiB9KVxuICAgICAgKVxuICAgICAgLmh0bWwoKSxcbiAgICBjb21MYWJlbCA9IG5ldyBlbEJ1aWxkZXIoZWxUYWcuTGFiZWwsIHsgZm9yOiBcImNvbW1cIiB9KVxuICAgICAgLmFkZChuZXdJbihJbnB1dC5UZXh0LCB7IGNsYXNzOiBgJHtjfV9faW5wdXRgLCBpZDogXCJjb21tXCIgfSkpXG4gICAgICAuaHRtbCgpO1xuICBkcHNMYWJlbC5pbm5lckhUTUwgKz0gXCJEYW1hZ2UsIEIuXCI7XG4gIGNvbUxhYmVsLmlubmVySFRNTCArPSBcIkNvbW1lbnRcIjtcblxuICBjb25zdCBhdGtGID0gbmV3IGVsQnVpbGRlcihlbFRhZy5Gb3JtLCB7XG4gICAgY2xhc3M6IFwidGVhbS1zZXQtaW5wdXRzXCIsXG4gICAgaWQ6IFwidGVhbS1hdHRhY2tzLWZvcm1cIixcbiAgfSlcbiAgICAuYWRkKGRwc0xhYmVsKVxuICAgIC5hZGQoY29tTGFiZWwpXG4gICAgLmFkZChidG5Db250YWluZXIpXG4gICAgLmh0bWwoKTtcblxuICBjb25zdCBhdGtDID0gbmV3IGVsQnVpbGRlcihlbFRhZy5EaXYsIHsgY2xhc3M6IGMgfSlcbiAgICAuYWRkKGF0a0YpXG4gICAgLmFkZChuZXdFbChcImgyXCIsIHt9LCBcIlNldCBGb29kICYgRHVyYSBUcmVlXCIpKVxuICAgIC5hZGQodHJlZURpdilcbiAgICAuaHRtbCgpO1xuXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYXR0YWNrLWFwcFwiKS5hcHBlbmRDaGlsZChhdGtDKTtcbiAgdGVhbS5tb3VudChcInRlYW0tc2V0XCIpO1xuXG4gIGNvbnN0IGhlYWRlciA9IGRvY3VtZW50XG4gICAgLmdldEVsZW1lbnRCeUlkKFwidGVhbS1hdHRhY2tzLWZvcm1cIilcbiAgICAuYXBwZW5kQ2hpbGQoXG4gICAgICBuZXdFbChlbFRhZy5UYWJsZSwge1xuICAgICAgICBpZDogb3V0cHV0VGFibGVJZCxcbiAgICAgICAgY2xhc3M6IFwiZHBzXCIsXG4gICAgICAgIHN0eWxlOiBcIndpZHRoOjEwMCVcIixcbiAgICAgIH0pXG4gICAgKVxuICAgIC5hcHBlbmRDaGlsZChuZXdFbChlbFRhZy5UaGVhZCkpXG4gICAgLmFwcGVuZENoaWxkKG5ld0VsKGVsVGFnLnRyKSk7XG4gIGNvbnN0IGJvZHkgPSBkb2N1bWVudFxuICAgIC5nZXRFbGVtZW50QnlJZChcImRwcy10YWJsZVwiKVxuICAgIC5hcHBlbmRDaGlsZChuZXdFbChlbFRhZy5UYm9keSkpO1xuICBkYXRhQ29sdW1ucy5mb3JFYWNoKCh4KSA9PiBoZWFkZXIuYXBwZW5kQ2hpbGQobmV3RWwoZWxUYWcudGgsIHt9LCB4KSkpO1xuXG4gIGNvbnN0IGRwc0ZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkcHNcIikgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgY29uc3QgY29tbWVudEZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb21tXCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gIGNzdkV4cG9ydC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICBjb25zdCBvID0gdGVhbS5kYW1hZ2UubWFwKCh4KSA9PiBbXG4gICAgICB0ZWFtLnJvc3Rlci5tYXAoKHkpID0+IHkubmFtZSkuam9pbihcInxcIiksXG4gICAgICB0ZWFtLmJlYXN0Lm5hbWUsXG4gICAgICAuLi5leHBlZGl0b3IuRHVyYVRyZWUubWFwKCh2KSA9PiBgJHt2LnZhbHVlfWApLFxuICAgICAgeFswXS50b1N0cmluZygpLFxuICAgICAgeFsxXS50b1N0cmluZygpLFxuICAgIF0pO1xuICAgIGV4cG9ydFRvQ3N2KFwiZGF0YS5jc3ZcIiwgbywgZGF0YUNvbHVtbnMpO1xuICB9KTtcblxuICBhZGRBdHRhY2suYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgY29uc3QgdHJlZSA9IG5ld0VsKGVsVGFnLkRpdik7XG4gICAgZXhwZWRpdG9yLkR1cmFUcmVlLmZvckVhY2goKHgpID0+IHtcbiAgICAgIHRyZWUuYXBwZW5kQ2hpbGQoeC5pbWcoKSk7XG4gICAgICB0cmVlLmlubmVySFRNTCArPSBgOiR7eC52YWx1ZX1gO1xuICAgIH0pO1xuXG4gICAgdGVhbS5hcHBlbmRSZXN1bHRSb3coXG4gICAgICBib2R5LFxuICAgICAgZHBzRmllbGQudmFsdWVBc051bWJlcixcbiAgICAgIGV4cGVkaXRvci5EdXJhVHJlZVtWaXJ0dWVzLk1JR0hUXS52YWx1ZSxcbiAgICAgIGV4cGVkaXRvci5EdXJhVHJlZVtWaXJ0dWVzLkZPUlRJVFVERV0udmFsdWUsXG4gICAgICBleHBlZGl0b3IuRHVyYVRyZWVbVmlydHVlcy5DRUxFUklUWV0udmFsdWUsXG4gICAgICBleHBlZGl0b3IuRHVyYVRyZWVbVmlydHVlcy5TT1JDRVJZXS52YWx1ZSxcbiAgICAgIGV4cGVkaXRvci5EdXJhVHJlZVtWaXJ0dWVzLlNVU1RFTkFOQ0VdLnZhbHVlLFxuICAgICAgY29tbWVudEZpZWxkLnZhbHVlXG4gICAgKTtcbiAgfSk7XG59XG4iXX0=