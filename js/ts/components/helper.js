import { elProp, elTag, verb } from "../model/constants.js";
export const log = (x) => {
    if (verb) {
        console.log(x);
    }
};
export { hasEmpty, populateStorage, savedObj, setApp, buttonWrapInput };
export function newIn(fieldType, attrs) {
    attrs["type"] = fieldType;
    return newEl("input", { ...attrs });
}
export function newEl(tag, props, inner) {
    const doc = document.createElement(tag);
    if (props) {
        Object.entries(props).forEach((k) => {
            if (k[1] != undefined) {
                doc.setAttribute(k[0], k[1]);
            }
        });
    }
    if (inner) {
        doc.innerHTML = inner;
    }
    return doc;
}
export function newBtn(text, c, id) {
    let attrs = {};
    attrs[elProp.Type] = "button";
    if (c) {
        attrs[elProp.Class] = c;
    }
    if (id) {
        attrs[elProp.Id] = id;
    }
    return newEl(elTag.Button, attrs, text);
}
function buttonWrapInput(el, update) {
    let input = el;
    const wrap = newEl("div", { class: "number-input" }), incBtn = newBtn("<", `desc ${el.className}`), descBtn = newBtn(">", `inc ${el.className}`);
    wrap.appendChild(incBtn);
    wrap.appendChild(el);
    wrap.appendChild(descBtn);
    wrap.addEventListener("click", (e) => {
        e.preventDefault();
        if (e.target instanceof HTMLButtonElement) {
            if (e.target.className.includes("desc")) {
                if (input.valueAsNumber > 0) {
                    input.stepDown();
                }
            }
            else {
                input.stepUp();
            }
            update(input.valueAsNumber);
        }
    });
    return wrap;
}
export function storedValue(inputId, value) {
    if (value >= 0 || value) {
        try {
            const str = JSON.stringify(value);
            localStorage.setItem(inputId, str);
        }
        catch (e) {
            console.log(`save error ${e}`);
            return false;
        }
        return true;
    }
    const v = localStorage.getItem(inputId);
    return v ? v : false;
}
function savedObj(str, def) {
    if (storedValue(str)) {
        return Object.assign(def, JSON.parse(storedValue(str).toString()));
    }
    return def;
}
function setApp(key) {
    const storedVal = localStorage.getItem(key);
    $(`#${key} option[value="${storedVal}"]`).first().attr("selected", "");
}
function populateStorage(key, value) {
    if (key && value) {
        localStorage.setItem(key, value);
        setApp(key);
    }
}
function hasEmpty(obj) {
    return (Object.keys(obj).length === 0 &&
        Object.values(obj).some((x) => x === null || x === 0 || x === undefined));
}
export function safeSum(n) {
    if (n.length > 0 && !hasEmpty(n)) {
        return n.reduce((a, b) => a + b, 0);
    }
    else {
        return 0;
    }
}
export async function fetchData(assetsPath) {
    const data = await fetch(`/assets/${assetsPath}`);
    const str = await data.text();
    return JSON.parse(str);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGVscGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvaGVscGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFTLElBQUksRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBRW5FLE1BQU0sQ0FBQyxNQUFNLEdBQUcsR0FBRyxDQUFDLENBQU0sRUFBRSxFQUFFO0lBQzVCLElBQUksSUFBSSxFQUFFLENBQUM7UUFDVCxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2pCLENBQUM7QUFDSCxDQUFDLENBQUM7QUFFRixPQUFPLEVBQUUsUUFBUSxFQUFFLGVBQWUsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLGVBQWUsRUFBRSxDQUFDO0FBTXhFLE1BQU0sVUFBVSxLQUFLLENBQUMsU0FBZ0IsRUFBRSxLQUErQjtJQUNyRSxLQUFLLENBQUMsTUFBTSxDQUFDLEdBQUcsU0FBUyxDQUFDO0lBQzFCLE9BQU8sS0FBSyxDQUFDLE9BQU8sRUFBRSxFQUFFLEdBQUcsS0FBSyxFQUFFLENBQUMsQ0FBQztBQUN0QyxDQUFDO0FBRUQsTUFBTSxVQUFVLEtBQUssQ0FDbkIsR0FBVyxFQUNYLEtBQStCLEVBQy9CLEtBQWM7SUFFZCxNQUFNLEdBQUcsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3hDLElBQUksS0FBSyxFQUFFLENBQUM7UUFDVixNQUFNLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFO1lBQ2xDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLFNBQVMsRUFBRSxDQUFDO2dCQUN0QixHQUFHLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUMvQixD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LENBQUM7QUFFRCxNQUFNLFVBQVUsT0FBTyxDQUFDLENBQVc7SUFDakMsSUFBSSxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1FBQ2pDLE9BQU8sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDdEMsQ0FBQztTQUFNLENBQUM7UUFDTixPQUFPLENBQUMsQ0FBQztJQUNYLENBQUM7QUFDSCxDQUFDO0FBRUQsTUFBTSxDQUFDLEtBQUssVUFBVSxTQUFTLENBQUMsVUFBa0I7SUFDaEQsTUFBTSxJQUFJLEdBQUcsTUFBTSxLQUFLLENBQUMsV0FBVyxVQUFVLEVBQUUsQ0FBQyxDQUFDO0lBQ2xELE1BQU0sR0FBRyxHQUFHLE1BQU0sSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO0lBQzlCLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUN6QixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZWxQcm9wLCBlbFRhZywgSW5wdXQsIHZlcmIgfSBmcm9tIFwiLi4vbW9kZWwvY29uc3RhbnRzLmpzXCI7XG4vLyBpbXBvcnQgc2FuaXRpemVIdG1sIGZyb20gXCJcIjtcbmV4cG9ydCBjb25zdCBsb2cgPSAoeDogYW55KSA9PiB7XG4gIGlmICh2ZXJiKSB7XG4gICAgY29uc29sZS5sb2coeCk7XG4gIH1cbn07XG5cbmV4cG9ydCB7IGhhc0VtcHR5LCBwb3B1bGF0ZVN0b3JhZ2UsIHNhdmVkT2JqLCBzZXRBcHAsIGJ1dHRvbldyYXBJbnB1dCB9O1xuXG4vLyEgLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8hIEhUTUwgR2VuZXJhdG9ycyAvL1xuLy8hIC8vLy8vLy8vLy8vLy8vLy8vXG5cbmV4cG9ydCBmdW5jdGlvbiBuZXdJbihmaWVsZFR5cGU6IElucHV0LCBhdHRycz86IHsgW2s6IHN0cmluZ106IHN0cmluZyB9KSB7XG4gIGF0dHJzW1widHlwZVwiXSA9IGZpZWxkVHlwZTtcbiAgcmV0dXJuIG5ld0VsKFwiaW5wdXRcIiwgeyAuLi5hdHRycyB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG5ld0VsKFxuICB0YWc6IHN0cmluZyxcbiAgcHJvcHM/OiB7IFtrOiBzdHJpbmddOiBzdHJpbmcgfSxcbiAgaW5uZXI/OiBzdHJpbmdcbikge1xuICBjb25zdCBkb2MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZyk7XG4gIGlmIChwcm9wcykge1xuICAgIE9iamVjdC5lbnRyaWVzKHByb3BzKS5mb3JFYWNoKChrKSA9PiB7XG4gICAgICBpZiAoa1sxXSAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgZG9jLnNldEF0dHJpYnV0ZShrWzBdLCBrWzFdKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBpZiAoaW5uZXIpIHtcbiAgICBkb2MuaW5uZXJIVE1MID0gaW5uZXI7XG4gIH1cbiAgcmV0dXJuIGRvYztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG5ld0J0bih0ZXh0Pzogc3RyaW5nLCBjPzogc3RyaW5nLCBpZD86IHN0cmluZykge1xuICBsZXQgYXR0cnM6IHsgW3g6IHN0cmluZ106IHN0cmluZyB9ID0ge307XG4gIGF0dHJzW2VsUHJvcC5UeXBlXSA9IFwiYnV0dG9uXCI7XG4gIGlmIChjKSB7XG4gICAgYXR0cnNbZWxQcm9wLkNsYXNzXSA9IGM7XG4gIH1cbiAgaWYgKGlkKSB7XG4gICAgYXR0cnNbZWxQcm9wLklkXSA9IGlkO1xuICB9XG4gIHJldHVybiBuZXdFbChlbFRhZy5CdXR0b24sIGF0dHJzLCB0ZXh0KTtcbn1cbmZ1bmN0aW9uIGJ1dHRvbldyYXBJbnB1dChlbDogSFRNTEVsZW1lbnQsIHVwZGF0ZTogKHk6IG51bWJlcikgPT4gdm9pZCkge1xuICBsZXQgaW5wdXQgPSBlbCBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICBjb25zdCB3cmFwID0gbmV3RWwoXCJkaXZcIiwgeyBjbGFzczogXCJudW1iZXItaW5wdXRcIiB9KSxcbiAgICAvLyBpbmNCdG4gPSBuZXdCdG4oXCLil4DvuI9cIiwgYGRlc2MgJHtlbC5jbGFzc05hbWV9YCksXG4gICAgaW5jQnRuID0gbmV3QnRuKFwiPFwiLCBgZGVzYyAke2VsLmNsYXNzTmFtZX1gKSxcbiAgICAvLyBkZXNjQnRuID0gbmV3QnRuKFwi4pa277iPXCIsIGBpbmMgJHtlbC5jbGFzc05hbWV9YCk7XG4gICAgZGVzY0J0biA9IG5ld0J0bihcIj5cIiwgYGluYyAke2VsLmNsYXNzTmFtZX1gKTtcblxuICB3cmFwLmFwcGVuZENoaWxkKGluY0J0bik7XG4gIHdyYXAuYXBwZW5kQ2hpbGQoZWwpO1xuICB3cmFwLmFwcGVuZENoaWxkKGRlc2NCdG4pO1xuICB3cmFwLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZTogTW91c2VFdmVudCkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBpZiAoZS50YXJnZXQgaW5zdGFuY2VvZiBIVE1MQnV0dG9uRWxlbWVudCkge1xuICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTmFtZS5pbmNsdWRlcyhcImRlc2NcIikpIHtcbiAgICAgICAgaWYgKGlucHV0LnZhbHVlQXNOdW1iZXIgPiAwKSB7XG4gICAgICAgICAgaW5wdXQuc3RlcERvd24oKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5wdXQuc3RlcFVwKCk7XG4gICAgICB9XG4gICAgICB1cGRhdGUoaW5wdXQudmFsdWVBc051bWJlcik7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gd3JhcDtcbn1cblxuLy8hIC8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vISAvLy8gbG9jYWwgZGF0YSAvLy9cbi8vISAvLy8vLy8vLy8vLy8vLy8vL1xuZXhwb3J0IGZ1bmN0aW9uIHN0b3JlZFZhbHVlKGlucHV0SWQ6IHN0cmluZywgdmFsdWU/OiBhbnkpOiBib29sZWFuIHwgc3RyaW5nIHtcbiAgaWYgKHZhbHVlID49IDAgfHwgdmFsdWUpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3RyID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oaW5wdXRJZCwgc3RyKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmxvZyhgc2F2ZSBlcnJvciAke2V9YCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGNvbnN0IHYgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShpbnB1dElkKTtcbiAgcmV0dXJuIHYgPyB2IDogZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHNhdmVkT2JqPFR5cGU+KHN0cjogc3RyaW5nLCBkZWY6IFR5cGUpIHtcbiAgaWYgKHN0b3JlZFZhbHVlKHN0cikpIHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihkZWYsIEpTT04ucGFyc2Uoc3RvcmVkVmFsdWUoc3RyKS50b1N0cmluZygpKSk7XG4gIH1cbiAgcmV0dXJuIGRlZjtcbn1cblxuZnVuY3Rpb24gc2V0QXBwKGtleTogc3RyaW5nKSB7XG4gIGNvbnN0IHN0b3JlZFZhbCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XG4gICQoYCMke2tleX0gb3B0aW9uW3ZhbHVlPVwiJHtzdG9yZWRWYWx9XCJdYCkuZmlyc3QoKS5hdHRyKFwic2VsZWN0ZWRcIiwgXCJcIik7XG59XG5cbmZ1bmN0aW9uIHBvcHVsYXRlU3RvcmFnZShrZXk6IHN0cmluZywgdmFsdWU6IHN0cmluZykge1xuICBpZiAoa2V5ICYmIHZhbHVlKSB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCB2YWx1ZSk7XG4gICAgc2V0QXBwKGtleSk7XG4gIH1cbn1cblxuLy8hIC8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vISAvLyB1dGlsaXR5IGZ1bmMgLy9cbi8vISAvLy8vLy8vLy8vLy8vLy8vL1xuXG5mdW5jdGlvbiBoYXNFbXB0eShvYmo6IFJlY29yZDxzdHJpbmcsIGFueT4pOiBib29sZWFuIHtcbiAgcmV0dXJuIChcbiAgICBPYmplY3Qua2V5cyhvYmopLmxlbmd0aCA9PT0gMCAmJlxuICAgIE9iamVjdC52YWx1ZXMob2JqKS5zb21lKCh4KSA9PiB4ID09PSBudWxsIHx8IHggPT09IDAgfHwgeCA9PT0gdW5kZWZpbmVkKVxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2FmZVN1bShuOiBudW1iZXJbXSkge1xuICBpZiAobi5sZW5ndGggPiAwICYmICFoYXNFbXB0eShuKSkge1xuICAgIHJldHVybiBuLnJlZHVjZSgoYSwgYikgPT4gYSArIGIsIDApO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAwO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaERhdGEoYXNzZXRzUGF0aDogc3RyaW5nKSB7XG4gIGNvbnN0IGRhdGEgPSBhd2FpdCBmZXRjaChgL2Fzc2V0cy8ke2Fzc2V0c1BhdGh9YCk7XG4gIGNvbnN0IHN0ciA9IGF3YWl0IGRhdGEudGV4dCgpO1xuICByZXR1cm4gSlNPTi5wYXJzZShzdHIpO1xufVxuIl19