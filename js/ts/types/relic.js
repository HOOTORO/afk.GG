import { updateTableData } from "../abex/relicEstimate.js";
import { elTag, Input, newEl, storedValue, } from "../components/helper.js";
import { Iconized } from "./iconized.js";
export default class Relic extends Iconized {
    cost;
    recipe;
    amount = 0;
    reserve = 0;
    constructor(icon, name, id, cost, recipe) {
        super(id, icon, name);
        this.cost = cost;
        this.recipe = recipe;
        const fnu = (y) => {
            if (y >= 0) {
                this.amount = y;
                storedValue(this.name, this.amount);
            }
        };
        const fni = () => {
            return storedValue(`rel${this.id}`).toString();
        };
        this.amount = parseInt(fni());
    }
    Tier() {
        return Math.floor((this.id - 1) / 18) + 1;
    }
    html() {
        let img = super.html();
        const span = newEl(elTag.Span, { class: `item-${this.id}` });
        img.setAttribute("width", "52");
        img.setAttribute("height", "52");
        span.appendChild(img);
        return span;
    }
    HTMLInput() {
        const stored = storedValue(`rel${this.id}`)
            ? parseInt(storedValue(`rel${this.id}`).toString())
            : 0;
        this.amount = stored;
        const img = super.html(), container = newEl(elTag.Span, { class: `inventory relic` }), props = {
            type: Input.Number,
            class: `user-bag-item-${this.id}`,
            name: this.name,
            min: "0",
            value: stored.toString(),
        }, input = newEl(elTag.Input, props);
        img.setAttribute("width", "52");
        img.setAttribute("height", "52");
        input.addEventListener("change", (e) => {
            if (e.target instanceof HTMLInputElement) {
                this.amount = e.target.valueAsNumber;
                e.target.setAttribute("value", this.amount.toString());
                storedValue(`rel${this.id}`, this.amount);
                updateTableData();
            }
        });
        container.appendChild(img);
        container.appendChild(input);
        return container;
    }
}
export class CoreRelic extends Relic {
    position;
    goal;
    virtue;
    constructor(icon, name, id, cost, rec, pos, v, goal) {
        super(icon, name, id, cost, rec);
        this.position = pos;
        this.goal = goal;
        this.virtue = v;
    }
    GoalTier() {
        return this.goal.Tier();
    }
    html() {
        let r = super.html();
        let tg = "relic";
        r.classList.add(`idx-${this.position}`, this.virtue, tg);
        return r;
    }
    HTMLGoal() {
        let r = this.goal.html();
        let tg = "goal";
        r.classList.add(`idx-${this.position}`, this.virtue, tg);
        return r;
    }
    update() {
        const relSpan = `.idx-${this.position}.${this.virtue}`;
        document.querySelectorAll(relSpan).forEach((v) => {
            if (v.classList.contains("goal")) {
                v.replaceWith(this.HTMLGoal());
            }
            else {
                v.replaceWith(this.html());
            }
        });
        storedValue(`${this.virtue}.${this.position}`, this);
        updateTableData();
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVsaWMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvdHlwZXMvcmVsaWMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQzNELE9BQU8sRUFDTCxLQUFLLEVBQ0wsS0FBSyxFQUVMLEtBQUssRUFFTCxXQUFXLEdBQ1osTUFBTSx5QkFBeUIsQ0FBQztBQUNqQyxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBR3pDLE1BQU0sQ0FBQyxPQUFPLE9BQU8sS0FBTSxTQUFRLFFBQVE7SUFRaEM7SUFDQTtJQVJULE1BQU0sR0FBRyxDQUFDLENBQUM7SUFDWCxPQUFPLEdBQUcsQ0FBQyxDQUFDO0lBRVosWUFDRSxJQUFZLEVBQ1osSUFBWSxFQUNaLEVBQVUsRUFDSCxJQUFZLEVBQ1osTUFBZ0I7UUFFdkIsS0FBSyxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFIZixTQUFJLEdBQUosSUFBSSxDQUFRO1FBQ1osV0FBTSxHQUFOLE1BQU0sQ0FBVTtRQUd2QixNQUFNLEdBQUcsR0FBRyxDQUFDLENBQVMsRUFBRSxFQUFFO1lBQ3hCLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDO2dCQUNYLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO2dCQUNoQixXQUFXLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDdEMsQ0FBQztRQUNILENBQUMsQ0FBQztRQUNGLE1BQU0sR0FBRyxHQUFHLEdBQUcsRUFBRTtZQUNmLE9BQU8sV0FBVyxDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDakQsQ0FBQyxDQUFDO1FBQ0YsSUFBSSxDQUFDLE1BQU0sR0FBRyxRQUFRLENBQUMsR0FBRyxFQUFFLENBQUMs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TSxDQUFDLEVBQUUsQ0FBQztnQkFDakMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQztZQUNqQyxDQUFDO2lCQUFNLENBQUM7Z0JBQ04sQ0FBQyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztZQUM3QixDQUFDO1FBQ0gsQ0FBQyxDQUFDLENBQUM7UUFDSCxXQUFXLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUNyRCxlQUFlLEVBQUUsQ0FBQztJQUNwQixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1cGRhdGVUYWJsZURhdGEgfSBmcm9tIFwiLi4vYWJleC9yZWxpY0VzdGltYXRlLmpzXCI7XG5pbXBvcnQge1xuICBlbFRhZyxcbiAgSW5wdXQsXG4gIGxvZyxcbiAgbmV3RWwsXG4gIHNhdmVkT2JqLFxuICBzdG9yZWRWYWx1ZSxcbn0gZnJvbSBcIi4uL2NvbXBvbmVudHMvaGVscGVyLmpzXCI7XG5pbXBvcnQgeyBJY29uaXplZCB9IGZyb20gXCIuL2ljb25pemVkLmpzXCI7XG5pbXBvcnQgeyBEdXJhc1ZpcnR1ZSB9IGZyb20gXCIuL3ZpcnR1ZS5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZWxpYyBleHRlbmRzIEljb25pemVkIHtcbiAgYW1vdW50ID0gMDtcbiAgcmVzZXJ2ZSA9IDA7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgaWNvbjogc3RyaW5nLFxuICAgIG5hbWU6IHN0cmluZyxcbiAgICBpZDogbnVtYmVyLFxuICAgIHB1YmxpYyBjb3N0OiBudW1iZXIsXG4gICAgcHVibGljIHJlY2lwZTogbnVtYmVyW11cbiAgKSB7XG4gICAgc3VwZXIoaWQsIGljb24sIG5hbWUpO1xuICAgIGNvbnN0IGZudSA9ICh5OiBudW1iZXIpID0+IHtcbiAgICAgIGlmICh5ID49IDApIHtcbiAgICAgICAgdGhpcy5hbW91bnQgPSB5O1xuICAgICAgICBzdG9yZWRWYWx1ZSh0aGlzLm5hbWUsIHRoaXMuYW1vdW50KTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IGZuaSA9ICgpID0+IHtcbiAgICAgIHJldHVybiBzdG9yZWRWYWx1ZShgcmVsJHt0aGlzLmlkfWApLnRvU3RyaW5nKCk7XG4gICAgfTtcbiAgICB0aGlzLmFtb3VudCA9IHBhcnNlSW50KGZuaSgpKTtcbiAgfVxuXG4gIHB1YmxpYyBUaWVyKCkge1xuICAgIHJldHVybiBNYXRoLmZsb29yKCh0aGlzLmlkIC0gMSkgLyAxOCkgKyAxO1xuICB9XG5cbiAgaHRtbCgpOiBIVE1MRWxlbWVudCB7XG4gICAgbGV0IGltZyA9IHN1cGVyLmh0bWwoKTtcbiAgICBjb25zdCBzcGFuID0gbmV3RWwoZWxUYWcuU3BhbiwgeyBjbGFzczogYGl0ZW0tJHt0aGlzLmlkfWAgfSk7XG4gICAgaW1nLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIFwiNTJcIik7XG4gICAgaW1nLnNldEF0dHJpYnV0ZShcImhlaWdodFwiLCBcIjUyXCIpO1xuICAgIHNwYW4uYXBwZW5kQ2hpbGQoaW1nKTtcbiAgICByZXR1cm4gc3BhbjtcbiAgfVxuXG4gIEhUTUxJbnB1dCgpOiBIVE1MRWxlbWVudCB7XG4gICAgY29uc3Qgc3RvcmVkID0gc3RvcmVkVmFsdWUoYHJlbCR7dGhpcy5pZH1gKVxuICAgICAgPyBwYXJzZUludChzdG9yZWRWYWx1ZShgcmVsJHt0aGlzLmlkfWApLnRvU3RyaW5nKCkpXG4gICAgICA6IDA7XG4gICAgdGhpcy5hbW91bnQgPSBzdG9yZWQ7XG4gICAgY29uc3QgaW1nID0gc3VwZXIuaHRtbCgpLFxuICAgICAgY29udGFpbmVyID0gbmV3RWwoZWxUYWcuU3BhbiwgeyBjbGFzczogYGludmVudG9yeSByZWxpY2AgfSksXG4gICAgICBwcm9wcyA9IHtcbiAgICAgICAgdHlwZTogSW5wdXQuTnVtYmVyLFxuICAgICAgICBjbGFzczogYHVzZXItYmFnLWl0ZW0tJHt0aGlzLmlkfWAsXG4gICAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgbWluOiBcIjBcIixcbiAgICAgICAgdmFsdWU6IHN0b3JlZC50b1N0cmluZygpLFxuICAgICAgfSxcbiAgICAgIGlucHV0ID0gbmV3RWwoZWxUYWcuSW5wdXQsIHByb3BzKTtcbiAgICBpbWcuc2V0QXR0cmlidXRlKFwid2lkdGhcIiwgXCI1MlwiKTtcbiAgICBpbWcuc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsIFwiNTJcIik7XG5cbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIChlKSA9PiB7XG4gICAgICBpZiAoZS50YXJnZXQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuYW1vdW50ID0gZS50YXJnZXQudmFsdWVBc051bWJlcjtcbiAgICAgICAgZS50YXJnZXQuc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgdGhpcy5hbW91bnQudG9TdHJpbmcoKSk7XG4gICAgICAgIHN0b3JlZFZhbHVlKGByZWwke3RoaXMuaWR9YCwgdGhpcy5hbW91bnQpO1xuICAgICAgICB1cGRhdGVUYWJsZURhdGEoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoaW1nKTtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoaW5wdXQpO1xuICAgIHJldHVybiBjb250YWluZXI7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIENvcmVSZWxpYyBleHRlbmRzIFJlbGljIHtcbiAgcG9zaXRpb246IG51bWJlcjtcbiAgZ29hbDogUmVsaWM7XG4gIHZpcnR1ZTogRHVyYXNWaXJ0dWU7XG4gIGNvbnN0cnVjdG9yKFxuICAgIGljb246IHN0cmluZyxcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgaWQ6IG51bWJlcixcbiAgICBjb3N0OiBudW1iZXIsXG4gICAgcmVjOiBudW1iZXJbXSxcbiAgICBwb3M6IG51bWJlcixcbiAgICB2OiBEdXJhc1ZpcnR1ZSxcbiAgICBnb2FsOiBSZWxpY1xuICApIHtcbiAgICBzdXBlcihpY29uLCBuYW1lLCBpZCwgY29zdCwgcmVjKTtcbiAgICB0aGlzLnBvc2l0aW9uID0gcG9zO1xuICAgIHRoaXMuZ29hbCA9IGdvYWw7XG4gICAgdGhpcy52aXJ0dWUgPSB2O1xuICB9XG4gIHB1YmxpYyBHb2FsVGllcigpIHtcbiAgICByZXR1cm4gdGhpcy5nb2FsLlRpZXIoKTtcbiAgfVxuXG4gIGh0bWwoKTogSFRNTEVsZW1lbnQge1xuICAgIGxldCByID0gc3VwZXIuaHRtbCgpO1xuICAgIGxldCB0ZyA9IFwicmVsaWNcIjtcbiAgICByLmNsYXNzTGlzdC5hZGQoYGlkeC0ke3RoaXMucG9zaXRpb259YCwgdGhpcy52aXJ0dWUsIHRnKTtcbiAgICByZXR1cm4gcjtcbiAgfVxuXG4gIEhUTUxHb2FsKCk6IEhUTUxFbGVtZW50IHtcbiAgICBsZXQgciA9IHRoaXMuZ29hbC5odG1sKCk7XG4gICAgbGV0IHRnID0gXCJnb2FsXCI7XG4gICAgci5jbGFzc0xpc3QuYWRkKGBpZHgtJHt0aGlzLnBvc2l0aW9ufWAsIHRoaXMudmlydHVlLCB0Zyk7XG4gICAgcmV0dXJuIHI7XG4gIH1cblxuICB1cGRhdGUoKSB7XG4gICAgY29uc3QgcmVsU3BhbiA9IGAuaWR4LSR7dGhpcy5wb3NpdGlvbn0uJHt0aGlzLnZpcnR1ZX1gO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwocmVsU3BhbikuZm9yRWFjaCgodikgPT4ge1xuICAgICAgaWYgKHYuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZ29hbFwiKSkge1xuICAgICAgICB2LnJlcGxhY2VXaXRoKHRoaXMuSFRNTEdvYWwoKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2LnJlcGxhY2VXaXRoKHRoaXMuaHRtbCgpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBzdG9yZWRWYWx1ZShgJHt0aGlzLnZpcnR1ZX0uJHt0aGlzLnBvc2l0aW9ufWAsIHRoaXMpO1xuICAgIHVwZGF0ZVRhYmxlRGF0YSgpO1xuICB9XG59XG4iXX0=