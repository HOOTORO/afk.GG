import { updateTableData } from "../abex/relicEstimate.js";
import { newEl, storedValue } from "../components/helper.js";
import { elTag, Input } from "../model/constants.js";
import { Iconized } from "./iconized.js";
export default class Relic extends Iconized {
    cost;
    recipe;
    amount = 0;
    reserve = 0;
    constructor(icon, name, id, cost, recipe) {
        super(id, icon, name);
        this.cost = cost;
        this.recipe = recipe;
        const fnu = (y) => {
            if (y >= 0) {
                this.amount = y;
                storedValue(this.name, this.amount);
            }
        };
        const fni = () => {
            return storedValue(`rel${this.id}`).toString();
        };
        this.amount = parseInt(fni());
    }
    Tier() {
        return Math.floor((this.id - 1) / 18) + 1;
    }
    html() {
        let img = super.html();
        const span = newEl(elTag.Span, { class: `item-${this.id}` });
        img.setAttribute("width", "52");
        img.setAttribute("height", "52");
        span.appendChild(img);
        return span;
    }
    HTMLInput() {
        const stored = storedValue(`rel${this.id}`)
            ? parseInt(storedValue(`rel${this.id}`).toString())
            : 0;
        this.amount = stored;
        const img = super.html(), container = newEl(elTag.Span, { class: `inventory relic` }), props = {
            type: Input.Number,
            class: `user-bag-item-${this.id}`,
            name: this.name,
            min: "0",
            value: stored.toString(),
        }, input = newEl(elTag.Input, props);
        img.setAttribute("width", "52");
        img.setAttribute("height", "52");
        input.addEventListener("change", (e) => {
            if (e.target instanceof HTMLInputElement) {
                this.amount = e.target.valueAsNumber;
                e.target.setAttribute("value", this.amount.toString());
                storedValue(`rel${this.id}`, this.amount);
                updateTableData();
            }
        });
        container.appendChild(img);
        container.appendChild(input);
        return container;
    }
}
export class CoreRelic extends Relic {
    position;
    goal;
    virtue;
    constructor(icon, name, id, cost, rec, pos, v, goal) {
        super(icon, name, id, cost, rec);
        this.position = pos;
        this.goal = goal;
        this.virtue = v;
    }
    GoalTier() {
        return this.goal.Tier();
    }
    html() {
        let r = super.html();
        let tg = "relic";
        r.classList.add(`idx-${this.position}`, this.virtue, tg);
        return r;
    }
    HTMLGoal() {
        let r = this.goal.html();
        let tg = "goal";
        r.classList.add(`idx-${this.position}`, this.virtue, tg);
        return r;
    }
    update() {
        const relSpan = `.idx-${this.position}.${this.virtue}`;
        document.querySelectorAll(relSpan).forEach((v) => {
            if (v.classList.contains("goal")) {
                v.replaceWith(this.HTMLGoal());
            }
            else {
                v.replaceWith(this.html());
            }
        });
        storedValue(`${this.virtue}.${this.position}`, this);
        updateTableData();
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVsaWMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvdHlwZXMvcmVsaWMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQzNELE9BQU8sRUFBRSxLQUFLLEVBQUUsV0FBVyxFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFDN0QsT0FBTyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUNyRCxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBR3pDLE1BQU0sQ0FBQyxPQUFPLE9BQU8sS0FBTSxTQUFRLFFBQVE7SUFRaEM7SUFDQTtJQVJULE1BQU0sR0FBRyxDQUFDLENBQUM7SUFDWCxPQUFPLEdBQUcsQ0FBQyxDQUFDO0lBRVosWUFDRSxJQUFZLEVBQ1osSUFBWSxFQUNaLEVBQVUsRUFDSCxJQUFZLEVBQ1osTUFBZ0I7UUFFdkIsS0FBSyxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFIZixTQUFJLEdBQUosSUFBSSxDQUFRO1FBQ1osV0FBTSxHQUFOLE1BQU0sQ0FBVTtRQUd2QixNQUFNLEdBQUcsR0FBRyxDQUFDLENBQVMsRUFBRSxFQUFFO1lBQ3hCLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDO2dCQUNYLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO2dCQUNoQixXQUFXLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDdEMsQ0FBQztRQUNILENBQUMsQ0FBQztRQUNGLE1BQU0sR0FBRyxHQUFHLEdBQUcsRUFBRTtZQUNmLE9BQU8sV0FBVyxDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDakQsQ0FBQyxDQUFDO1FBQ0YsSUFBSSxDQUFDLE1B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Q0FBQyxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQztnQkFDakMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQztZQUNqQyxDQUFDO2lCQUFNLENBQUM7Z0JBQ04sQ0FBQyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztZQUM3QixDQUFDO1FBQ0gsQ0FBQyxDQUFDLENBQUM7UUFDSCxXQUFXLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUNyRCxlQUFlLEVBQUUsQ0FBQztJQUNwQixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1cGRhdGVUYWJsZURhdGEgfSBmcm9tIFwiLi4vYWJleC9yZWxpY0VzdGltYXRlLmpzXCI7XG5pbXBvcnQgeyBuZXdFbCwgc3RvcmVkVmFsdWUgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9oZWxwZXIuanNcIjtcbmltcG9ydCB7IGVsVGFnLCBJbnB1dCB9IGZyb20gXCIuLi9tb2RlbC9jb25zdGFudHMuanNcIjtcbmltcG9ydCB7IEljb25pemVkIH0gZnJvbSBcIi4vaWNvbml6ZWQuanNcIjtcbmltcG9ydCB7IER1cmFzVmlydHVlIH0gZnJvbSBcIi4vdmlydHVlLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlbGljIGV4dGVuZHMgSWNvbml6ZWQge1xuICBhbW91bnQgPSAwO1xuICByZXNlcnZlID0gMDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBpY29uOiBzdHJpbmcsXG4gICAgbmFtZTogc3RyaW5nLFxuICAgIGlkOiBudW1iZXIsXG4gICAgcHVibGljIGNvc3Q6IG51bWJlcixcbiAgICBwdWJsaWMgcmVjaXBlOiBudW1iZXJbXVxuICApIHtcbiAgICBzdXBlcihpZCwgaWNvbiwgbmFtZSk7XG4gICAgY29uc3QgZm51ID0gKHk6IG51bWJlcikgPT4ge1xuICAgICAgaWYgKHkgPj0gMCkge1xuICAgICAgICB0aGlzLmFtb3VudCA9IHk7XG4gICAgICAgIHN0b3JlZFZhbHVlKHRoaXMubmFtZSwgdGhpcy5hbW91bnQpO1xuICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgZm5pID0gKCkgPT4ge1xuICAgICAgcmV0dXJuIHN0b3JlZFZhbHVlKGByZWwke3RoaXMuaWR9YCkudG9TdHJpbmcoKTtcbiAgICB9O1xuICAgIHRoaXMuYW1vdW50ID0gcGFyc2VJbnQoZm5pKCkpO1xuICB9XG5cbiAgcHVibGljIFRpZXIoKSB7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoKHRoaXMuaWQgLSAxKSAvIDE4KSArIDE7XG4gIH1cblxuICBodG1sKCk6IEhUTUxFbGVtZW50IHtcbiAgICBsZXQgaW1nID0gc3VwZXIuaHRtbCgpO1xuICAgIGNvbnN0IHNwYW4gPSBuZXdFbChlbFRhZy5TcGFuLCB7IGNsYXNzOiBgaXRlbS0ke3RoaXMuaWR9YCB9KTtcbiAgICBpbWcuc2V0QXR0cmlidXRlKFwid2lkdGhcIiwgXCI1MlwiKTtcbiAgICBpbWcuc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsIFwiNTJcIik7XG4gICAgc3Bhbi5hcHBlbmRDaGlsZChpbWcpO1xuICAgIHJldHVybiBzcGFuO1xuICB9XG5cbiAgSFRNTElucHV0KCk6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zdCBzdG9yZWQgPSBzdG9yZWRWYWx1ZShgcmVsJHt0aGlzLmlkfWApXG4gICAgICA/IHBhcnNlSW50KHN0b3JlZFZhbHVlKGByZWwke3RoaXMuaWR9YCkudG9TdHJpbmcoKSlcbiAgICAgIDogMDtcbiAgICB0aGlzLmFtb3VudCA9IHN0b3JlZDtcbiAgICBjb25zdCBpbWcgPSBzdXBlci5odG1sKCksXG4gICAgICBjb250YWluZXIgPSBuZXdFbChlbFRhZy5TcGFuLCB7IGNsYXNzOiBgaW52ZW50b3J5IHJlbGljYCB9KSxcbiAgICAgIHByb3BzID0ge1xuICAgICAgICB0eXBlOiBJbnB1dC5OdW1iZXIsXG4gICAgICAgIGNsYXNzOiBgdXNlci1iYWctaXRlbS0ke3RoaXMuaWR9YCxcbiAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgICBtaW46IFwiMFwiLFxuICAgICAgICB2YWx1ZTogc3RvcmVkLnRvU3RyaW5nKCksXG4gICAgICB9LFxuICAgICAgaW5wdXQgPSBuZXdFbChlbFRhZy5JbnB1dCwgcHJvcHMpO1xuICAgIGltZy5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLCBcIjUyXCIpO1xuICAgIGltZy5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIiwgXCI1MlwiKTtcblxuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKGUpID0+IHtcbiAgICAgIGlmIChlLnRhcmdldCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5hbW91bnQgPSBlLnRhcmdldC52YWx1ZUFzTnVtYmVyO1xuICAgICAgICBlLnRhcmdldC5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCB0aGlzLmFtb3VudC50b1N0cmluZygpKTtcbiAgICAgICAgc3RvcmVkVmFsdWUoYHJlbCR7dGhpcy5pZH1gLCB0aGlzLmFtb3VudCk7XG4gICAgICAgIHVwZGF0ZVRhYmxlRGF0YSgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChpbWcpO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChpbnB1dCk7XG4gICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ29yZVJlbGljIGV4dGVuZHMgUmVsaWMge1xuICBwb3NpdGlvbjogbnVtYmVyO1xuICBnb2FsOiBSZWxpYztcbiAgdmlydHVlOiBEdXJhc1ZpcnR1ZTtcbiAgY29uc3RydWN0b3IoXG4gICAgaWNvbjogc3RyaW5nLFxuICAgIG5hbWU6IHN0cmluZyxcbiAgICBpZDogbnVtYmVyLFxuICAgIGNvc3Q6IG51bWJlcixcbiAgICByZWM6IG51bWJlcltdLFxuICAgIHBvczogbnVtYmVyLFxuICAgIHY6IER1cmFzVmlydHVlLFxuICAgIGdvYWw6IFJlbGljXG4gICkge1xuICAgIHN1cGVyKGljb24sIG5hbWUsIGlkLCBjb3N0LCByZWMpO1xuICAgIHRoaXMucG9zaXRpb24gPSBwb3M7XG4gICAgdGhpcy5nb2FsID0gZ29hbDtcbiAgICB0aGlzLnZpcnR1ZSA9IHY7XG4gIH1cbiAgcHVibGljIEdvYWxUaWVyKCkge1xuICAgIHJldHVybiB0aGlzLmdvYWwuVGllcigpO1xuICB9XG5cbiAgaHRtbCgpOiBIVE1MRWxlbWVudCB7XG4gICAgbGV0IHIgPSBzdXBlci5odG1sKCk7XG4gICAgbGV0IHRnID0gXCJyZWxpY1wiO1xuICAgIHIuY2xhc3NMaXN0LmFkZChgaWR4LSR7dGhpcy5wb3NpdGlvbn1gLCB0aGlzLnZpcnR1ZSwgdGcpO1xuICAgIHJldHVybiByO1xuICB9XG5cbiAgSFRNTEdvYWwoKTogSFRNTEVsZW1lbnQge1xuICAgIGxldCByID0gdGhpcy5nb2FsLmh0bWwoKTtcbiAgICBsZXQgdGcgPSBcImdvYWxcIjtcbiAgICByLmNsYXNzTGlzdC5hZGQoYGlkeC0ke3RoaXMucG9zaXRpb259YCwgdGhpcy52aXJ0dWUsIHRnKTtcbiAgICByZXR1cm4gcjtcbiAgfVxuXG4gIHVwZGF0ZSgpIHtcbiAgICBjb25zdCByZWxTcGFuID0gYC5pZHgtJHt0aGlzLnBvc2l0aW9ufS4ke3RoaXMudmlydHVlfWA7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChyZWxTcGFuKS5mb3JFYWNoKCh2KSA9PiB7XG4gICAgICBpZiAodi5jbGFzc0xpc3QuY29udGFpbnMoXCJnb2FsXCIpKSB7XG4gICAgICAgIHYucmVwbGFjZVdpdGgodGhpcy5IVE1MR29hbCgpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHYucmVwbGFjZVdpdGgodGhpcy5odG1sKCkpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHN0b3JlZFZhbHVlKGAke3RoaXMudmlydHVlfS4ke3RoaXMucG9zaXRpb259YCwgdGhpcyk7XG4gICAgdXBkYXRlVGFibGVEYXRhKCk7XG4gIH1cbn1cbiJdfQ==